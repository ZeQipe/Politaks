(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27215,e=>{e.v("/_next/static/media/upload.5d9c62e0.svg")},60678,e=>{"use strict";var t=e.i(71645);e.i(47167);var l=e.i(93803),r=e.i(19273);function a(e){return e}function s(e,t,s){if("object"!=typeof t||null===t)return;let i=e.getMutationCache(),n=e.getQueryCache(),o=s?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??a,c=t.mutations||[],u=t.queries||[];c.forEach(({state:t,...l})=>{i.build(e,{...e.getDefaultOptions().hydrate?.mutations,...s?.defaultOptions?.mutations,...l},t)}),u.forEach(({queryKey:t,state:a,queryHash:i,meta:c,promise:u,dehydratedAt:d})=>{let m=u?(0,l.tryResolveSync)(u):void 0,h=void 0===a.data?m?.data:a.data,f=void 0===h?h:o(h),p=n.get(i),b=p?.state.status==="pending",x=p?.state.fetchStatus==="fetching";if(p){let e=m&&void 0!==d&&d>p.state.dataUpdatedAt;if(a.dataUpdatedAt>p.state.dataUpdatedAt||e){let{fetchStatus:e,...t}=a;p.setState({...t,data:f})}}else p=n.build(e,{...e.getDefaultOptions().hydrate?.queries,...s?.defaultOptions?.queries,queryKey:t,queryHash:i,meta:c},{...a,data:f,fetchStatus:"idle",status:void 0!==f?"success":a.status});u&&!b&&!x&&(void 0===d||d>p.state.dataUpdatedAt)&&p.fetch(void 0,{initialPromise:Promise.resolve(u).then(o)}).catch(r.noop)})}var i=e.i(12598),n=({children:e,options:l={},state:r,queryClient:a})=>{let n=(0,i.useQueryClient)(a),o=t.useRef(l);t.useEffect(()=>{o.current=l});let c=t.useMemo(()=>{if(r){if("object"!=typeof r)return;let e=n.getQueryCache(),t=r.queries||[],l=[],a=[];for(let r of t){let t=e.get(r.queryHash);t?(r.state.dataUpdatedAt>t.state.dataUpdatedAt||r.promise&&"pending"!==t.state.status&&"fetching"!==t.state.fetchStatus&&void 0!==r.dehydratedAt&&r.dehydratedAt>t.state.dataUpdatedAt)&&a.push(r):l.push(r)}if(l.length>0&&s(n,{queries:l},o.current),a.length>0)return a}},[n,r]);return t.useEffect(()=>{c&&s(n,{queries:c},o.current)},[n,c]),e};e.s(["HydrationBoundary",()=>n],60678)},94102,e=>{"use strict";var t=e.i(43476),l=e.i(932),r=e.i(57688),a=e.i(53145);e.i(91268);var s=e.i(94643);let i=e=>{let r,a,s=(0,l.c)(3),{className:i}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,t.jsx)("circle",{cx:"7",cy:"7",r:"6",stroke:"currentColor",strokeOpacity:".3",strokeWidth:"2"}),(0,t.jsx)("path",{fill:"currentColor",fillOpacity:".1",fillRule:"nonzero",d:"M7 0a7 7 0 0 1 7 7h-2a5 5 0 0 0-5-5V0z"})]}),s[0]=r):r=s[0],s[1]!==i?(a=(0,t.jsx)("svg",{"aria-hidden":"true",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:i,children:r}),s[1]=i,s[2]=a):a=s[2],a};e.i(92916);var n=e.i(77086);let o=e=>{let r,a,o,c,u=(0,l.c)(10),{isLoading:d}=e,m=d?"Обработка...":"Отправить";return u[0]!==d?(r=d&&(0,t.jsx)(i,{className:"animate-spin text-dark w-4 h-4"}),u[0]=d,u[1]=r):r=u[1],u[2]!==m?(a=(0,t.jsx)(n.Text,{uppercase:!0,weight:"bold",color:"black",size:"sm",children:m}),u[2]=m,u[3]=a):a=u[3],u[4]!==r||u[5]!==a?(o=(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[r,a]}),u[4]=r,u[5]=a,u[6]=o):o=u[6],u[7]!==d||u[8]!==o?(c=(0,t.jsx)("div",{className:"",children:(0,t.jsx)(s.Button,{disabled:d,type:"submit",variant:"submit",children:o})}),u[7]=d,u[8]=o,u[9]=c):c=u[9],c};e.i(20227);var c=e.i(9278),u=e.i(71645);e.i(4075);var d=e.i(64761),m=e.i(42010);e.i(91140);var h=e.i(27956);let f=(0,m.tv)({extend:h.inputElementTokens,variants:{size:{s:"h-[3lh]",m:"h-[6lh]",l:"h-[9lh]"}},defaultVariants:{size:"s",state:"default",multiline:!0}}),p=e=>{let r,a,s,i,n,o,c,m,h,p,b,x,g=(0,l.c)(27);g[0]!==e?({label:i,error:a,labelPlacement:c,iconPlacement:m,icon:s,placeholder:n,disabled:r,size:o,...h}=e,g[0]=e,g[1]=r,g[2]=a,g[3]=s,g[4]=i,g[5]=n,g[6]=o,g[7]=c,g[8]=m,g[9]=h):(r=g[1],a=g[2],s=g[3],i=g[4],n=g[5],o=g[6],c=g[7],m=g[8],h=g[9]);let v=void 0===c?"top":c,y=void 0===m?"right":m,j=(0,u.useId)();g[10]!==o?(p=f({size:o}),g[10]=o,g[11]=p):p=g[11];let S=p;return g[12]!==r||g[13]!==j||g[14]!==n||g[15]!==h||g[16]!==S?(b=(0,t.jsx)("textarea",{disabled:r,id:j,className:S,placeholder:n,...h}),g[12]=r,g[13]=j,g[14]=n,g[15]=h,g[16]=S,g[17]=b):b=g[17],g[18]!==r||g[19]!==a||g[20]!==s||g[21]!==y||g[22]!==j||g[23]!==i||g[24]!==v||g[25]!==b?(x=(0,t.jsxs)(d.InputWrapper,{disabled:r,id:j,label:i,error:a,labelPlacement:v,iconPlacement:y,inputType:"multiline",children:[s,b]}),g[18]=r,g[19]=a,g[20]=s,g[21]=y,g[22]=j,g[23]=i,g[24]=v,g[25]=b,g[26]=x):x=g[26],x};e.i(67496);var b=e.i(92626),x=e.i(25526);let g=(0,m.tv)({slots:{label:"w-fit pr-3 peer border-r border-r-neutral-400 text-sm text-zinc-600",output:"w-fit pl-3 text-sm text-zinc-600"},variants:{state:{focus:{label:"border-r-primary"},default:{}}},defaultVariants:{state:"default"}}),v=e=>{let r,a,s,i,n,o,c,m,h,f,p,b,v,y,j,S,w,k,O,F,C,P,M=(0,l.c)(57),{labelPlacement:E,iconPlacement:N,label:R,disabled:_,onChange:I,error:q}=e,[D,T]=(0,u.useState)(!1),[z,A]=(0,u.useState)(""),K=(0,u.useId)();M[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>T(!1),M[0]=r):r=M[0];let U=(0,x.useClickAway)(r);M[1]!==I?(a=e=>{let t=e.target.files?.[0];A(t?t.name:""),T(!1),I?.(e)},M[1]=I,M[2]=a):a=M[2];let W=a,L=D?"focus":"default";if(M[3]!==_||M[4]!==q||M[5]!==W||M[6]!==N||M[7]!==K||M[8]!==R||M[9]!==E||M[10]!==U||M[11]!==L){let e,l=g({state:L});f="w-fit",p=U,s=d.InputWrapper,w=_,k=L,i=E,n=N,o=K,c=R,m="file",h=q,y="flex w-full items-center",j=(0,t.jsx)("label",{htmlFor:K,className:l.label(),children:"Выберите файл"}),M[28]===Symbol.for("react.memo_cache_sentinel")?(e=()=>T(!0),M[28]=e):e=M[28],M[29]!==_||M[30]!==W||M[31]!==K?(S=(0,t.jsx)("input",{disabled:_,onClick:e,onChange:W,id:K,className:"hidden",type:"file"}),M[29]=_,M[30]=W,M[31]=K,M[32]=S):S=M[32],b=K,v=l.output(),M[3]=_,M[4]=q,M[5]=W,M[6]=N,M[7]=K,M[8]=R,M[9]=E,M[10]=U,M[11]=L,M[12]=s,M[13]=i,M[14]=n,M[15]=o,M[16]=c,M[17]=m,M[18]=h,M[19]=f,M[20]=p,M[21]=b,M[22]=v,M[23]=y,M[24]=j,M[25]=S,M[26]=w,M[27]=k}else s=M[12],i=M[13],n=M[14],o=M[15],c=M[16],m=M[17],h=M[18],f=M[19],p=M[20],b=M[21],v=M[22],y=M[23],j=M[24],S=M[25],w=M[26],k=M[27];let G=z||"Файл не выбран";return M[33]!==G||M[34]!==b||M[35]!==v?(O=(0,t.jsx)("output",{htmlFor:b,className:v,children:G}),M[33]=G,M[34]=b,M[35]=v,M[36]=O):O=M[36],M[37]!==O||M[38]!==y||M[39]!==j||M[40]!==S?(F=(0,t.jsxs)("div",{className:y,children:[j,S,O]}),M[37]=O,M[38]=y,M[39]=j,M[40]=S,M[41]=F):F=M[41],M[42]!==s||M[43]!==i||M[44]!==n||M[45]!==o||M[46]!==c||M[47]!==m||M[48]!==h||M[49]!==F||M[50]!==w||M[51]!==k?(C=(0,t.jsx)(s,{disabled:w,state:k,labelPlacement:i,iconPlacement:n,id:o,label:c,inputType:m,error:h,children:F}),M[42]=s,M[43]=i,M[44]=n,M[45]=o,M[46]=c,M[47]=m,M[48]=h,M[49]=F,M[50]=w,M[51]=k,M[52]=C):C=M[52],M[53]!==f||M[54]!==p||M[55]!==C?(P=(0,t.jsx)("div",{className:f,ref:p,children:C}),M[53]=f,M[54]=p,M[55]=C,M[56]=P):P=M[56],P};function y(e){let r,s=(0,l.c)(53),{field:i,control:n,index:o}=e,u=`fields.${o}.value`;s[0]!==n?(r={control:n},s[0]=n,s[1]=r):r=s[1];let{isSubmitting:d}=(0,a.useFormState)(r);switch(i.type){case"single":{let e,l,r,o=i.required&&"Обязательное поле";return s[2]!==o?(e={required:o},s[2]=o,s[3]=e):e=s[3],s[4]!==i.label||s[5]!==i.labelPlacement||s[6]!==i.placeholder||s[7]!==i.showFloatingHint||s[8]!==d?(l=e=>{let{field:l,fieldState:r}=e;return(0,t.jsx)(b.TextField,{showFloatingHint:i.showFloatingHint,label:i.label,placeholder:i.placeholder,labelPlacement:i.labelPlacement,error:r.error?.message,disabled:d,...l})},s[4]=i.label,s[5]=i.labelPlacement,s[6]=i.placeholder,s[7]=i.showFloatingHint,s[8]=d,s[9]=l):l=s[9],s[10]!==n||s[11]!==u||s[12]!==e||s[13]!==l?(r=(0,t.jsx)(a.Controller,{name:u,control:n,rules:e,render:l}),s[10]=n,s[11]=u,s[12]=e,s[13]=l,s[14]=r):r=s[14],r}case"multiline":{let e,l,r,o=i.required&&"Обязательное поле";return s[15]!==o?(e={required:o},s[15]=o,s[16]=e):e=s[16],s[17]!==i.label||s[18]!==i.labelPlacement||s[19]!==i.placeholder||s[20]!==i.size||s[21]!==d?(l=e=>{let{field:l,fieldState:r}=e;return(0,t.jsx)(p,{label:i.label,placeholder:i.placeholder,labelPlacement:i.labelPlacement,size:i.size,error:r.error?.message,disabled:d,...l})},s[17]=i.label,s[18]=i.labelPlacement,s[19]=i.placeholder,s[20]=i.size,s[21]=d,s[22]=l):l=s[22],s[23]!==n||s[24]!==u||s[25]!==e||s[26]!==l?(r=(0,t.jsx)(a.Controller,{name:u,control:n,rules:e,render:l}),s[23]=n,s[24]=u,s[25]=e,s[26]=l,s[27]=r):r=s[27],r}case"photo":{let e,l,r,o=i.required&&"Обязательное поле";return s[28]!==o?(e={required:o},s[28]=o,s[29]=e):e=s[29],s[30]!==i.label||s[31]!==i.labelPlacement||s[32]!==d?(l=e=>{let{field:l,fieldState:r}=e;return(0,t.jsx)(v,{label:i.label,labelPlacement:i.labelPlacement,error:r.error?.message,disabled:d,onChange:e=>{let t=e.target.files?.[0];l.onChange(t)}})},s[30]=i.label,s[31]=i.labelPlacement,s[32]=d,s[33]=l):l=s[33],s[34]!==n||s[35]!==u||s[36]!==e||s[37]!==l?(r=(0,t.jsx)(a.Controller,{name:u,control:n,rules:e,render:l}),s[34]=n,s[35]=u,s[36]=e,s[37]=l,s[38]=r):r=s[38],r}case"select":{let e,l,r,o=i.required&&"Обязательное поле";return s[39]!==o?(e={required:o},s[39]=o,s[40]=e):e=s[40],s[41]!==i.items||s[42]!==i.label||s[43]!==i.labelPlacement||s[44]!==i.placeholder||s[45]!==i.withSearch||s[46]!==d?(l=e=>{let{field:l,fieldState:r}=e;return(0,t.jsx)(c.Select,{label:i.label,items:i.items,placeholder:i.placeholder,withSearch:i.withSearch,labelPlacement:i.labelPlacement,error:r.error?.message,disabled:d,value:l.value,onChange:e=>{l.onChange(e.label)}})},s[41]=i.items,s[42]=i.label,s[43]=i.labelPlacement,s[44]=i.placeholder,s[45]=i.withSearch,s[46]=d,s[47]=l):l=s[47],s[48]!==n||s[49]!==u||s[50]!==e||s[51]!==l?(r=(0,t.jsx)(a.Controller,{name:u,control:n,rules:e,render:l}),s[48]=n,s[49]=u,s[50]=e,s[51]=l,s[52]=r):r=s[52],r}default:return console.warn("Неизвестный тип поля:",i),null}}e.i(7948);var j=e.i(17098);let S=()=>{let e,r=(0,l.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,t.jsx)(j.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!1}),(0,t.jsx)(j.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!0,textareaSize:"md"}),(0,t.jsx)(j.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!1})]}),r[0]=e):e=r[0],e},w=e=>{let r,a,s=(0,l.c)(8),{control:i,fields:n,isLoading:o}=e;if(o||0===n.length){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S,{}),s[0]=e):e=s[0],e}if(s[1]!==i||s[2]!==n){let e;s[4]!==i?(e=(e,l)=>(0,t.jsx)(y,{field:e,control:i,index:l},e.id),s[4]=i,s[5]=e):e=s[5],r=n.map(e),s[1]=i,s[2]=n,s[3]=r}else r=s[3];return s[6]!==r?(a=(0,t.jsx)("div",{className:"flex grow flex-col gap-4",children:r}),s[6]=r,s[7]=a):a=s[7],a};var k=e.i(66027),O=e.i(52069),F=e.i(28476);function C(e){return{...e,value:"photo"===e.type?null:""}}e.i(82131);var P=e.i(61122),M=e.i(57033);let E={src:e.i(27215).default,width:10,height:10,blurWidth:0,blurHeight:0};var N=e.i(17878),R=e.i(15122);e.i(47167);var _=e.i(5766),I=e.i(14272),q=e.i(40143),D=e.i(15823),T=e.i(19273),z=class extends D.Subscribable{#e;#t=void 0;#l;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,T.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#l,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,T.hashKey)(t.mutationKey)!==(0,T.hashKey)(this.options.mutationKey)?this.reset():this.#l?.state.status==="pending"&&this.#l.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#l?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#l?.removeObserver(this),this.#l=void 0,this.#a(),this.#s()}mutate(e,t){return this.#r=t,this.#l?.removeObserver(this),this.#l=this.#e.getMutationCache().build(this.#e,this.options),this.#l.addObserver(this),this.#l.execute(e)}#a(){let e=this.#l?.state??(0,I.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#s(e){q.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,l=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,l,r),this.#r.onSettled?.(e.data,null,t,l,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,l,r),this.#r.onSettled?.(void 0,e.error,t,l,r))}this.listeners.forEach(e=>{e(this.#t)})})}},A=e.i(12598);function K(e){return{name:e.name,value:e.value??""}}function U(e){return{...e,value:"photo"===e.type?null:""}}function W(e){console.error("❌ Ошибка генерации: ",e.message),_.default.error(`Ошибка генерации: ${e.message}`)}e.s(["GenerationFormWidget",0,()=>{let e,i,c,d,m,h,f,p,b,x,g=(0,l.c)(31),{filtersData:v,form:y,isLoading:j}=(()=>{let e,t,r,s,i,n,o,c,d,m,h=(0,l.c)(25),{data:f,isLoading:p,isError:b}=(0,N.useGetGenerationFilters)();h[0]!==f?(e=(0,R.getDefaultFilterItemOrFallback)(f,"tasks"),h[0]=f,h[1]=e):e=h[1],h[2]!==f?(t=(0,R.getDefaultFilterItemOrFallback)(f,"models"),h[2]=f,h[3]=t):t=h[3],h[4]!==f?(r=(0,R.getDefaultFilterItemOrFallback)(f,"domains"),h[4]=f,h[5]=r):r=h[5],h[6]!==e||h[7]!==t||h[8]!==r?(s={task:e,model:t,domain:r},h[6]=e,h[7]=t,h[8]=r,h[9]=s):s=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(i=[],h[10]=i):i=h[10],h[11]!==s?(n={defaultValues:{filters:s,fields:i}},h[11]=s,h[12]=n):n=h[12];let x=(0,a.useForm)(n),g=(0,u.useRef)(!!f);h[13]!==x?(o=e=>{x.reset({filters:{task:(0,R.getDefaultFilterItemOrFallback)(e,"tasks"),model:(0,R.getDefaultFilterItemOrFallback)(e,"models"),domain:(0,R.getDefaultFilterItemOrFallback)(e,"domains")},fields:[]})},h[13]=x,h[14]=o):o=h[14];let v=(0,u.useEffectEvent)(o);return h[15]!==f||h[16]!==v?(c=()=>{f&&!g.current&&(console.log("✅ Синхронизация фильтров useFormWithFilters"),v(f),g.current=!0)},h[15]=f,h[16]=v,h[17]=c):c=h[17],h[18]!==f?(d=[f],h[18]=f,h[19]=d):d=h[19],(0,u.useEffect)(c,d),h[20]!==f||h[21]!==x||h[22]!==b||h[23]!==p?(m={form:x,filtersData:f,isLoading:p,isError:b},h[20]=f,h[21]=x,h[22]=b,h[23]=p,h[24]=m):m=h[24],m})(),{isSubmitting:S}=y.formState,{handleSubmit:I}=(e=>{let t,r,a,s,i,n=(0,l.c)(8),{mutateAsync:o}=((i=(0,l.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(s={mutationKey:["generate-content"],mutationFn:F.postGeneration},i[0]=s):s=i[0],function(e,t){let l=(0,A.useQueryClient)(void 0),[r]=u.useState(()=>new z(l,e));u.useEffect(()=>{r.setOptions(e)},[r,e]);let a=u.useSyncExternalStore(u.useCallback(e=>r.subscribe(q.notifyManager.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=u.useCallback((e,t)=>{r.mutate(e,t).catch(T.noop)},[r]);if(a.error&&(0,T.shouldThrowError)(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}(s));n[0]!==e||n[1]!==o?(t=async t=>{let{fields:l,filters:r}=t,a={filters:{taskId:r.task.id,modelId:r.model.id,domainId:r.domain.id},fields:l.map(K)};await o(a,{onSuccess:t=>{let{data:r}=t;_.default.success("Генерация успешна !");let a=l.map(U);e.setValue("fields",a)},onError:W})},n[0]=e,n[1]=o,n[2]=t):t=n[2];let c=t;return n[3]!==e||n[4]!==c?(r=e.handleSubmit(c),n[3]=e,n[4]=c,n[5]=r):r=n[5],n[6]!==r?(a={handleSubmit:r},n[6]=r,n[7]=a):a=n[7],a})(y);g[0]!==y.control?(e={control:y.control,name:"fields"},g[0]=y.control,g[1]=e):e=g[1];let{fields:D,replace:L}=(0,a.useFieldArray)(e);g[2]!==y.control?(i={control:y.control,name:"filters.task"},g[2]=y.control,g[3]=i):i=g[3];let G=(0,a.useWatch)(i);g[4]!==y.control?(c={control:y.control,name:"filters.model"},g[4]=y.control,g[5]=c):c=g[5];let H=(0,a.useWatch)(c);g[6]!==y.control?(d={control:y.control,name:"filters.domain"},g[6]=y.control,g[7]=d):d=g[7];let V=(0,a.useWatch)(d);g[8]!==L||g[9]!==V.id||g[10]!==H.id||g[11]!==G.id?(m={taskId:G.id,modelId:H.id,domainId:V.id,replace:L},g[8]=L,g[9]=V.id,g[10]=H.id,g[11]=G.id,g[12]=m):m=g[12];let{isLoading:B}=(e=>{let t,r,a,s=(0,l.c)(9),{taskId:i,modelId:n,domainId:o,replace:c,enabled:d}=e,m=void 0===d||d;s[0]!==o||s[1]!==m||s[2]!==n||s[3]!==i?(t={taskId:i,modelId:n,domainId:o,enabled:m},s[0]=o,s[1]=m,s[2]=n,s[3]=i,s[4]=t):t=s[4];let h=(e=>{let t,r,a,s=(0,l.c)(12),{taskId:i,modelId:n,domainId:o,enabled:c}=e;s[0]!==o||s[1]!==n||s[2]!==i?(t=O.apiKeys.getGenerationFormConfig(i,n,o),s[0]=o,s[1]=n,s[2]=i,s[3]=t):t=s[3],s[4]!==o||s[5]!==n||s[6]!==i?(r=()=>(0,F.getGenerationFormConfig)({taskId:i,modelId:n,domainId:o}),s[4]=o,s[5]=n,s[6]=i,s[7]=r):r=s[7];let u=(void 0===c||c)&&!!i&&!!n&&!!o;return s[8]!==t||s[9]!==r||s[10]!==u?(a={queryKey:t,queryFn:r,enabled:u,staleTime:3e5},s[8]=t,s[9]=r,s[10]=u,s[11]=a):a=s[11],(0,k.useQuery)(a)})(t);return s[5]!==h.data||s[6]!==c?(r=()=>{h.data&&(console.log("\uD83D\uDD04 Синхронизация формы с конфигурацией"),c(h.data.map(C)))},a=[h.data,c],s[5]=h.data,s[6]=c,s[7]=r,s[8]=a):(r=s[7],a=s[8]),(0,u.useEffect)(r,a),h})(m);return g[13]!==y.control||g[14]!==S?(h=e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(P.FilterSelect,{disabled:S,config:e.tasks,control:y.control,name:"filters.task"}),(0,t.jsxs)(s.Button,{className:"inline-flex items-center shrink-0",variant:"primary",children:[(0,t.jsx)(n.Text,{size:"sm",uppercase:!0,weight:"medium",color:"white",children:"Загрузить Excel"}),(0,t.jsx)(r.default,{className:"ml-2",alt:"",src:E})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(P.FilterSelect,{disabled:S,control:y.control,name:"filters.model",config:e.models}),(0,t.jsx)(P.FilterSelect,{disabled:S,control:y.control,name:"filters.domain",config:e.domains})]})]}),g[13]=y.control,g[14]=S,g[15]=h):h=g[15],g[16]!==v||g[17]!==j||g[18]!==h?(f=(0,t.jsx)(M.FiltersPanel,{filters:v,isLoading:j,children:h}),g[16]=v,g[17]=j,g[18]=h,g[19]=f):f=g[19],g[20]!==B||g[21]!==D||g[22]!==y.control?(p=(0,t.jsx)(w,{control:y.control,fields:D,isLoading:B}),g[20]=B,g[21]=D,g[22]=y.control,g[23]=p):p=g[23],g[24]!==S?(b=(0,t.jsx)(o,{isLoading:S}),g[24]=S,g[25]=b):b=g[25],g[26]!==I||g[27]!==f||g[28]!==p||g[29]!==b?(x=(0,t.jsxs)("form",{onSubmit:I,className:"flex flex-1 flex-col gap-4",children:[f,p,b]}),g[26]=I,g[27]=f,g[28]=p,g[29]=b,g[30]=x):x=g[30],x}],94102)},70330,e=>{"use strict";e.s(["GenerationResultWidget",()=>v,"VIEW_MODES",()=>b],70330);var t=e.i(43476),l=e.i(932),r=e.i(71645),a=e.i(40143),s=e.i(19273),i=e.i(12598);function n(e,t){return e.findAll(t.filters).map(e=>t.select?t.select(e):e.state)}function o(e){return e.state.data}var c=e.i(42010);let u=(0,c.tv)({base:["bg-white rounded-xl","transition-shadow duration-200"],variants:{elevation:{none:"shadow-none",low:"shadow-sm",medium:"shadow-md",high:"shadow-lg"},padding:{none:"p-0",sm:"p-3",md:"p-4",lg:"p-5"},bordered:{true:"border border-gray-200",false:""}},defaultVariants:{elevation:"medium",padding:"md",bordered:!1}}),d=e=>{let r,a,s,i,n,o,c,d,m,h=(0,l.c)(18);h[0]!==e?({children:s,as:r,bordered:a,padding:o,elevation:n,className:i,...c}=e,h[0]=e,h[1]=r,h[2]=a,h[3]=s,h[4]=i,h[5]=n,h[6]=o,h[7]=c):(r=h[1],a=h[2],s=h[3],i=h[4],n=h[5],o=h[6],c=h[7]),h[8]!==a||h[9]!==i||h[10]!==n||h[11]!==o?(d=u({elevation:n,padding:o,bordered:a,className:i}),h[8]=a,h[9]=i,h[10]=n,h[11]=o,h[12]=d):d=h[12];let f=d,p=r||"div";return h[13]!==p||h[14]!==s||h[15]!==c||h[16]!==f?(m=(0,t.jsx)(p,{className:f,...c,children:s}),h[13]=p,h[14]=s,h[15]=c,h[16]=f,h[17]=m):m=h[17],m};e.i(92916);var m=e.i(77086);let h=(0,c.tv)({slots:{track:"w-8 h-3 rounded-full flex items-center transition",thumb:"block w-4.5 h-4.5 rounded-full transform transition"},variants:{checked:{true:{thumb:"translate-x-4 bg-primary",track:"bg-primary"},false:{thumb:"bg-primary/90",track:"bg-primary/85"}}}}),f=e=>{let r,a,s,i,n,o,c=(0,l.c)(13),{onSwitch:u,checked:d}=e;if(c[0]!==d||c[1]!==u){let{thumb:e,track:t}=h({checked:d});a="button",s=u,i=t(),r=e(),c[0]=d,c[1]=u,c[2]=r,c[3]=a,c[4]=s,c[5]=i}else r=c[2],a=c[3],s=c[4],i=c[5];return c[6]!==r?(n=(0,t.jsx)("span",{className:r}),c[6]=r,c[7]=n):n=c[7],c[8]!==a||c[9]!==s||c[10]!==i||c[11]!==n?(o=(0,t.jsx)("button",{type:a,onClick:s,className:i,children:n}),c[8]=a,c[9]=s,c[10]=i,c[11]=n,c[12]=o):o=c[12],o},p=e=>{let r,a,s,i,n,o=(0,l.c)(14),{mode:c,onToggle:u,labels:d}=e,[h,p]=b,x=c!==h,g=c===h?"primary":"black",v=c===p?"primary":"black";o[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(m.Text,{size:"2xl",children:"Результат"}),o[0]=r):r=o[0];let y=d[b[0]];o[1]!==g||o[2]!==y?(a=(0,t.jsx)(m.Text,{color:g,children:y}),o[1]=g,o[2]=y,o[3]=a):a=o[3],o[4]!==x||o[5]!==u?(s=(0,t.jsx)(f,{checked:x,onSwitch:u}),o[4]=x,o[5]=u,o[6]=s):s=o[6];let j=d[b[1]];return o[7]!==v||o[8]!==j?(i=(0,t.jsx)(m.Text,{color:v,children:j}),o[7]=v,o[8]=j,o[9]=i):i=o[9],o[10]!==a||o[11]!==s||o[12]!==i?(n=(0,t.jsxs)("header",{className:"flex justify-between",children:[r,(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[a,s,i]})]}),o[10]=a,o[11]=s,o[12]=i,o[13]=n):n=o[13],n},b=["demo","source"],x={demo:"Отображение",source:"Исходный код"},g={demo:"text",source:"html"},v=()=>{let e,c,u,h,f,b,v,j,S=(0,l.c)(9),[w,k]=(0,r.useState)("demo"),O=((v=(0,l.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(f={filters:{mutationKey:["generate-content"],status:"success"},select:o},v[0]=f):f=v[0],j=function(e={},t){let l=(0,i.useQueryClient)(void 0).getMutationCache(),o=r.useRef(e),c=r.useRef(null);return null===c.current&&(c.current=n(l,e)),r.useEffect(()=>{o.current=e}),r.useSyncExternalStore(r.useCallback(e=>l.subscribe(()=>{let t=(0,s.replaceEqualDeep)(c.current,n(l,o.current));c.current!==t&&(c.current=t,a.notifyManager.schedule(e))}),[l]),()=>c.current,()=>c.current)}(f),v[1]!==j?(b=j.at(-1),v[1]=j,v[2]=b):b=v[2],b);S[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{k(y)},S[0]=e):e=S[0];let F=e,C=O?.data?.[g[w]];return S[1]!==w?(c=(0,t.jsx)(p,{labels:x,mode:w,onToggle:F}),S[1]=w,S[2]=c):c=S[2],S[3]!==C||S[4]!==O?.data?(u=(0,t.jsx)(d,{className:"flex-1",children:O?.data?(0,t.jsx)(m.Text,{children:C}):(0,t.jsx)(m.Text,{color:"info",children:"Настройте параметры и запустите генерацию"})}),S[3]=C,S[4]=O?.data,S[5]=u):u=S[5],S[6]!==c||S[7]!==u?(h=(0,t.jsxs)("section",{className:"flex flex-col flex-1 gap-3",children:[c,u]}),S[6]=c,S[7]=u,S[8]=h):h=S[8],h};function y(e){let[t,l]=b;return e===t?l:t}}]);