(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94102,e=>{"use strict";var l=e.i(43476),t=e.i(932),r=e.i(57688),n=e.i(53145);e.i(91268);var a=e.i(94643),i=e.i(95770);e.i(92916);var o=e.i(77086),s=function(e){var r,n,s,c,d=(0,t.c)(10),u=e.isLoading,m=u?"Обработка...":"Отправить";return d[0]!==u?(r=u&&(0,l.jsx)(i.Spinner,{className:"animate-spin text-dark w-4 h-4"}),d[0]=u,d[1]=r):r=d[1],d[2]!==m?(n=(0,l.jsx)(o.Text,{uppercase:!0,weight:"bold",color:"black",size:"sm",children:m}),d[2]=m,d[3]=n):n=d[3],d[4]!==r||d[5]!==n?(s=(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[r,n]}),d[4]=r,d[5]=n,d[6]=s):s=d[6],d[7]!==u||d[8]!==s?(c=(0,l.jsx)("div",{className:"",children:(0,l.jsx)(a.Button,{disabled:u,type:"submit",variant:"submit",children:s})}),d[7]=u,d[8]=s,d[9]=c):c=d[9],c},c=e.i(66027),d=e.i(52069),u=e.i(80140),m=function(){var e,l=(0,t.c)(1);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:[d.apiKeys.getExcelLink],queryFn:u.getExcelLink,select:f},l[0]=e):e=l[0],(0,c.useQuery)(e)};function f(e){return e.link}var h=e.i(20786),b=e.i(51682),v=e.i(40316),x=e.i(25526),p=e.i(71645),g=e.i(64899);e.i(33451);var j=e.i(23042);e.i(4075);var y=e.i(64761);e.i(67496);var k=e.i(92626);e.i(91140);var S=e.i(27956),w=e.i(42010),_=(0,w.tv)({slots:{icon:"transition-transform duration-200",selectedContainer:"flex flex-wrap gap-2 mb-2",selectedItem:["inline-flex items-center gap-2 px-3 py-1.5","bg-secondary text-dark rounded-sm","shadow-sm","transition-all duration-150","hover:shadow-md hover:-translate-y-0.5"],removeButton:["ml-1 w-4 h-4","flex items-center justify-center","text-dark/60 hover:text-primary","transition-colors duration-150","cursor-pointer","active:scale-90"],dropdownItem:["px-4 py-2 cursor-pointer transition-colors flex items-center gap-2","first:rounded-t-sm last:rounded-b-sm"],checkmark:"w-4 h-4 flex items-center justify-center text-xs font-bold"},variants:{isOpen:{true:{icon:"rotate-180"},false:{icon:"rotate-0"}},isSelected:{true:{dropdownItem:"bg-primary-50 hover:bg-primary-100",checkmark:"text-primary-600"},false:{dropdownItem:"hover:bg-gray-100",checkmark:"text-transparent"}}}}),C=function(e){var r,n,a,i,o,s,c=(0,t.c)(23),d=e.items,u=e.value,m=e.label,f=e.labelPlacement,h=e.iconPlacement,b=e.placeholder,x=e.error,k=e.onChange,w=e.className,C=e.disabled,I=e.withSearch;c[0]!==u?(r=void 0===u?[]:u,c[0]=u,c[1]=r):r=c[1];var F=r,L=void 0===f?"top":f,T=void 0===h?"right":h,E=(0,p.useId)();c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,S.inputElementTokens)({state:"readonly"}),c[2]=n):n=c[2];var q=n;c[3]===Symbol.for("react.memo_cache_sentinel")?(a=_(),c[3]=a):a=c[3];var z=a;c[4]!==d||c[5]!==F?(c[7]!==F?(o=function(e){return F.includes(e.label)},c[7]=F,c[8]=o):o=c[8],i=d.filter(o),c[4]=d,c[5]=F,c[6]=i):i=c[6];var D=i;return c[9]!==w||c[10]!==C||c[11]!==x||c[12]!==T||c[13]!==E||c[14]!==d||c[15]!==m||c[16]!==L||c[17]!==k||c[18]!==b||c[19]!==D||c[20]!==F||c[21]!==I?(s=(0,l.jsx)(g.DropdownToggle,{children:function(e){var t=e.isOpen,r=e.toggle,n=e.ref,a=function(e,l){e.stopPropagation();var t=D.filter(function(e){return e.id!==l.id});null==k||k(t)},i=D.length>0?"Выбрано: ".concat(D.length):"";return(0,l.jsxs)("div",{ref:n,className:w,children:[D.length>0&&(0,l.jsx)("div",{className:z.selectedContainer(),children:D.map(function(e){return(0,l.jsxs)("span",{className:z.selectedItem(),children:[e.label,(0,l.jsx)("button",{type:"button",className:z.removeButton(),onClick:function(l){return a(l,e)},children:"✕"})]},e.id)})}),(0,l.jsxs)(y.InputWrapper,{disabled:C,id:E,label:m,error:x,labelPlacement:L,iconPlacement:T,inputType:"select",state:"readonly",onClick:r,dropdown:t&&(0,l.jsx)(N,{items:d,selectedIds:D.map(P),onItemClick:function(e){var l;l=F.includes(e.label)?D.filter(function(l){return l.id!==e.id}):(0,v._)(D).concat([e]),null==k||k(l)},withSearch:I}),children:[(0,l.jsx)("div",{className:"grid place-items-center",children:(0,l.jsx)(j.ArrowIcon,{className:z.icon({isOpen:t})})}),(0,l.jsx)("input",{id:E,disabled:C,type:"text",className:q,value:i,placeholder:b,readOnly:!0})]})]})}}),c[9]=w,c[10]=C,c[11]=x,c[12]=T,c[13]=E,c[14]=d,c[15]=m,c[16]=L,c[17]=k,c[18]=b,c[19]=D,c[20]=F,c[21]=I,c[22]=s):s=c[22],s};function N(e){var r,n=(0,t.c)(25),a=e.items,i=e.selectedIds,o=e.onItemClick,s=e.withSearch,c=(0,b._)(p.default.useState(""),2),d=c[0],u=c[1],m=(0,x.useDebounce)(d,300);n[0]===Symbol.for("react.memo_cache_sentinel")?(h=function(e){u(e.target.value)},n[0]=h):h=n[0];var f=h;if(n[1]!==m||n[2]!==a||n[3]!==o||n[4]!==d||n[5]!==i||n[6]!==s){n[11]!==m?(S=function(e){return e.label.toLowerCase().includes(m.toLowerCase())},n[11]=m,n[12]=S):S=n[12];var h,v,g,j,y,S,w,C,N=a.filter(S);n[13]!==o?(w=function(e){null==o||o(e)},n[13]=o,n[14]=w):w=n[14];var P=w;n[15]!==P?(C=function(e,l){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),P(l))},n[15]=P,n[16]=C):C=n[16];var I=C,F=_();v="menu",g="absolute z-50 w-full rounded-sm bg-white shadow-lg border-transparent max-h-[200px] overflow-y-auto scroll-base top-full mt-5",n[17]!==d||n[18]!==s?(j=s&&(0,l.jsx)("div",{className:"px-4 py-2",children:(0,l.jsx)(k.TextField,{onChange:f,placeholder:"Поиск",showFloatingHint:!0,value:d})}),n[17]=d,n[18]=s,n[19]=j):j=n[19],y=N.map(function(e){var t=i.includes(e.id);return(0,l.jsxs)("div",{className:F.dropdownItem({isSelected:t}),onClick:function(){return P(e)},onKeyDown:function(l){return I(l,e)},role:"menuitem",tabIndex:0,children:[(0,l.jsx)("span",{className:F.checkmark({isSelected:t}),children:"✓"}),(0,l.jsx)("span",{children:e.label})]},e.id)}),n[1]=m,n[2]=a,n[3]=o,n[4]=d,n[5]=i,n[6]=s,n[7]=v,n[8]=g,n[9]=j,n[10]=y}else v=n[7],g=n[8],j=n[9],y=n[10];return n[20]!==v||n[21]!==g||n[22]!==j||n[23]!==y?(r=(0,l.jsxs)("div",{role:v,className:g,children:[j,y]}),n[20]=v,n[21]=g,n[22]=j,n[23]=y,n[24]=r):r=n[24],r}function P(e){return e.id}e.i(20227);var I=e.i(9278);e.i(95650);var F=e.i(36792),L=(0,w.tv)({slots:{label:"w-fit pr-3 peer border-r border-r-neutral-400 text-sm text-zinc-600",output:"w-fit pl-3 text-sm text-zinc-600"},variants:{state:{focus:{label:"border-r-primary"},default:{}}},defaultVariants:{state:"default"}}),T=function(e){var r,n,a,i,o=(0,t.c)(57),s=e.labelPlacement,c=e.iconPlacement,d=e.label,u=e.disabled,m=e.onChange,f=e.error,h=(0,b._)((0,p.useState)(!1),2),v=h[0],g=h[1],j=(0,b._)((0,p.useState)(""),2),k=j[0],S=j[1],w=(0,p.useId)();o[0]===Symbol.for("react.memo_cache_sentinel")?(P=function(){return g(!1)},o[0]=P):P=o[0];var _=(0,x.useClickAway)(P);o[1]!==m?(I=function(e){var l,t=null==(l=e.target.files)?void 0:l[0];S(t?t.name:""),g(!1),null==m||m(e)},o[1]=m,o[2]=I):I=o[2];var C=I,N=v?"focus":"default";if(o[3]!==u||o[4]!==f||o[5]!==C||o[6]!==c||o[7]!==w||o[8]!==d||o[9]!==s||o[10]!==_||o[11]!==N){var P,I,F,T,E,q,z,D,A,O,B,H,K,W,G,M,V,R,Q,U=L({state:N});O="w-fit",B=_,F=y.InputWrapper,V=u,R=N,T=s,E=c,q=w,z=d,D="file",A=f,W="flex w-full items-center",G=(0,l.jsx)("label",{htmlFor:w,className:U.label(),children:"Выберите файл"}),o[28]===Symbol.for("react.memo_cache_sentinel")?(Q=function(){return g(!0)},o[28]=Q):Q=o[28],o[29]!==u||o[30]!==C||o[31]!==w?(M=(0,l.jsx)("input",{disabled:u,onClick:Q,onChange:C,id:w,className:"hidden",type:"file"}),o[29]=u,o[30]=C,o[31]=w,o[32]=M):M=o[32],H=w,K=U.output(),o[3]=u,o[4]=f,o[5]=C,o[6]=c,o[7]=w,o[8]=d,o[9]=s,o[10]=_,o[11]=N,o[12]=F,o[13]=T,o[14]=E,o[15]=q,o[16]=z,o[17]=D,o[18]=A,o[19]=O,o[20]=B,o[21]=H,o[22]=K,o[23]=W,o[24]=G,o[25]=M,o[26]=V,o[27]=R}else F=o[12],T=o[13],E=o[14],q=o[15],z=o[16],D=o[17],A=o[18],O=o[19],B=o[20],H=o[21],K=o[22],W=o[23],G=o[24],M=o[25],V=o[26],R=o[27];var J=k||"Файл не выбран";return o[33]!==J||o[34]!==H||o[35]!==K?(r=(0,l.jsx)("output",{htmlFor:H,className:K,children:J}),o[33]=J,o[34]=H,o[35]=K,o[36]=r):r=o[36],o[37]!==r||o[38]!==W||o[39]!==G||o[40]!==M?(n=(0,l.jsxs)("div",{className:W,children:[G,M,r]}),o[37]=r,o[38]=W,o[39]=G,o[40]=M,o[41]=n):n=o[41],o[42]!==F||o[43]!==T||o[44]!==E||o[45]!==q||o[46]!==z||o[47]!==D||o[48]!==A||o[49]!==n||o[50]!==V||o[51]!==R?(a=(0,l.jsx)(F,{disabled:V,state:R,labelPlacement:T,iconPlacement:E,id:q,label:z,inputType:D,error:A,children:n}),o[42]=F,o[43]=T,o[44]=E,o[45]=q,o[46]=z,o[47]=D,o[48]=A,o[49]=n,o[50]=V,o[51]=R,o[52]=a):a=o[52],o[53]!==O||o[54]!==B||o[55]!==a?(i=(0,l.jsx)("div",{className:O,ref:B,children:a}),o[53]=O,o[54]=B,o[55]=a,o[56]=i):i=o[56],i};function E(e){var r=(0,t.c)(67),a=e.field,i=e.control,o=e.index,s="fields.".concat(o,".value");r[0]!==i?(d={control:i},r[0]=i,r[1]=d):d=r[1];var c=(0,n.useFormState)(d).isSubmitting;switch(a.type){case"single":var d,u,m,f,b=a.required&&"Обязательное поле";return r[2]!==b?(u={required:b},r[2]=b,r[3]=u):u=r[3],r[4]!==a.label||r[5]!==a.labelPlacement||r[6]!==a.placeholder||r[7]!==a.showFloatingHint||r[8]!==c?(m=function(e){var t,r=e.field,n=e.fieldState;return(0,l.jsx)(k.TextField,(0,h._)({showFloatingHint:a.showFloatingHint,label:a.label,placeholder:a.placeholder,labelPlacement:a.labelPlacement,error:null==(t=n.error)?void 0:t.message,disabled:c},r))},r[4]=a.label,r[5]=a.labelPlacement,r[6]=a.placeholder,r[7]=a.showFloatingHint,r[8]=c,r[9]=m):m=r[9],r[10]!==i||r[11]!==s||r[12]!==u||r[13]!==m?(f=(0,l.jsx)(n.Controller,{name:s,control:i,rules:u,render:m}),r[10]=i,r[11]=s,r[12]=u,r[13]=m,r[14]=f):f=r[14],f;case"multiline":var v,x,p,g=a.required&&"Обязательное поле";return r[15]!==g?(v={required:g},r[15]=g,r[16]=v):v=r[16],r[17]!==a.label||r[18]!==a.labelPlacement||r[19]!==a.placeholder||r[20]!==a.size||r[21]!==c?(x=function(e){var t,r=e.field,n=e.fieldState;return(0,l.jsx)(F.TextArea,(0,h._)({label:a.label,placeholder:a.placeholder,labelPlacement:a.labelPlacement,size:a.size,error:null==(t=n.error)?void 0:t.message,disabled:c},r))},r[17]=a.label,r[18]=a.labelPlacement,r[19]=a.placeholder,r[20]=a.size,r[21]=c,r[22]=x):x=r[22],r[23]!==i||r[24]!==s||r[25]!==v||r[26]!==x?(p=(0,l.jsx)(n.Controller,{name:s,control:i,rules:v,render:x}),r[23]=i,r[24]=s,r[25]=v,r[26]=x,r[27]=p):p=r[27],p;case"photo":var j,y,S,w=a.required&&"Обязательное поле";return r[28]!==w?(j={required:w},r[28]=w,r[29]=j):j=r[29],r[30]!==a.label||r[31]!==a.labelPlacement||r[32]!==c?(y=function(e){var t,r=e.field,n=e.fieldState;return(0,l.jsx)(T,{label:a.label,labelPlacement:a.labelPlacement,error:null==(t=n.error)?void 0:t.message,disabled:c,onChange:function(e){var l,t=null==(l=e.target.files)?void 0:l[0];r.onChange(t)}})},r[30]=a.label,r[31]=a.labelPlacement,r[32]=c,r[33]=y):y=r[33],r[34]!==i||r[35]!==s||r[36]!==j||r[37]!==y?(S=(0,l.jsx)(n.Controller,{name:s,control:i,rules:j,render:y}),r[34]=i,r[35]=s,r[36]=j,r[37]=y,r[38]=S):S=r[38],S;case"select":if(a.multiple){var _,N,P,L,E,z,D=a.required&&"Обязательное поле";return r[39]!==D?(L={required:D},r[39]=D,r[40]=L):L=r[40],r[41]!==a.items||r[42]!==a.label||r[43]!==a.labelPlacement||r[44]!==a.placeholder||r[45]!==a.withSearch||r[46]!==c?(E=function(e){var t,r=e.field,n=e.fieldState,i=Array.isArray(r.value)?r.value:[];return(0,l.jsx)(C,{label:a.label,items:a.items,placeholder:a.placeholder,withSearch:a.withSearch,labelPlacement:a.labelPlacement,error:null==(t=n.error)?void 0:t.message,disabled:c,value:i,onChange:function(e){r.onChange(e.map(q))}})},r[41]=a.items,r[42]=a.label,r[43]=a.labelPlacement,r[44]=a.placeholder,r[45]=a.withSearch,r[46]=c,r[47]=E):E=r[47],r[48]!==i||r[49]!==s||r[50]!==L||r[51]!==E?(z=(0,l.jsx)(n.Controller,{name:s,control:i,rules:L,render:E}),r[48]=i,r[49]=s,r[50]=L,r[51]=E,r[52]=z):z=r[52],z}var A=a.required&&"Обязательное поле";return r[53]!==A?(_={required:A},r[53]=A,r[54]=_):_=r[54],r[55]!==a.items||r[56]!==a.label||r[57]!==a.labelPlacement||r[58]!==a.placeholder||r[59]!==a.withSearch||r[60]!==c?(N=function(e){var t,r=e.field,n=e.fieldState;return(0,l.jsx)(I.Select,{label:a.label,items:a.items,placeholder:a.placeholder,withSearch:a.withSearch,labelPlacement:a.labelPlacement,error:null==(t=n.error)?void 0:t.message,disabled:c,value:r.value,onChange:function(e){r.onChange(e.label)}})},r[55]=a.items,r[56]=a.label,r[57]=a.labelPlacement,r[58]=a.placeholder,r[59]=a.withSearch,r[60]=c,r[61]=N):N=r[61],r[62]!==i||r[63]!==s||r[64]!==_||r[65]!==N?(P=(0,l.jsx)(n.Controller,{name:s,control:i,rules:_,render:N}),r[62]=i,r[63]=s,r[64]=_,r[65]=N,r[66]=P):P=r[66],P;default:return console.warn("Неизвестный тип поля:",a),null}}function q(e){return e.label}e.i(7948);var z=e.i(17098),D=function(){var e,r=(0,t.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,l.jsx)(z.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!1}),(0,l.jsx)(z.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!0,textareaSize:"md"}),(0,l.jsx)(z.SkeletonInput,{labelPlacement:"top",showLabel:!0,multiline:!1})]}),r[0]=e):e=r[0],e},A=function(e){var r,n,a,i,o=(0,t.c)(8),s=e.control,c=e.fields;return e.isLoading||0===c.length?(o[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(D,{}),o[0]=r):r=o[0],r):(o[1]!==s||o[2]!==c?(o[4]!==s?(a=function(e,t){return(0,l.jsx)(E,{field:e,control:s,index:t},e.id)},o[4]=s,o[5]=a):a=o[5],n=c.map(a),o[1]=s,o[2]=c,o[3]=n):n=o[3],o[6]!==n?(i=(0,l.jsx)("div",{className:"flex grow flex-col gap-4",children:n}),o[6]=n,o[7]=i):i=o[7],i)},O=e.i(92808),B=e.i(28476),H=function(e){var l,r,n,a=(0,t.c)(12),i=e.taskId,o=e.modelId,s=e.domainId,u=e.enabled;a[0]!==s||a[1]!==o||a[2]!==i?(l=d.apiKeys.getGenerationFormConfig(i,o,s),a[0]=s,a[1]=o,a[2]=i,a[3]=l):l=a[3],a[4]!==s||a[5]!==o||a[6]!==i?(r=function(){return(0,B.getGenerationFormConfig)({taskId:i,modelId:o,domainId:s})},a[4]=s,a[5]=o,a[6]=i,a[7]=r):r=a[7];var m=(void 0===u||u)&&!!i&&!!o&&!!s;return a[8]!==l||a[9]!==r||a[10]!==m?(n={queryKey:l,queryFn:r,enabled:m,staleTime:3e5},a[8]=l,a[9]=r,a[10]=m,a[11]=n):n=a[11],(0,c.useQuery)(n)},K=function(e){var l,r,n,a=(0,t.c)(9),i=e.taskId,o=e.modelId,s=e.domainId,c=e.replace,d=e.enabled,u=void 0===d||d;a[0]!==s||a[1]!==u||a[2]!==o||a[3]!==i?(l={taskId:i,modelId:o,domainId:s,enabled:u},a[0]=s,a[1]=u,a[2]=o,a[3]=i,a[4]=l):l=a[4];var m=H(l);return a[5]!==m.data||a[6]!==c?(r=function(){m.data&&(console.log("\uD83D\uDD04 Синхронизация формы с конфигурацией"),c(m.data.map(W)))},n=[m.data,c],a[5]=m.data,a[6]=c,a[7]=r,a[8]=n):(r=a[7],n=a[8]),(0,p.useEffect)(r,n),m};function W(e){var l="";return"photo"===e.type?l=null:"select"===e.type&&e.multiple&&(l=[]),(0,O._)((0,h._)({},e),{value:l})}var G=function(e){var r,a,i,o,s=(0,t.c)(18),c=e.control,d=e.field;s[0]!==c?(r={control:c},s[0]=c,s[1]=r):r=s[1];var u=(0,n.useFormState)(r).isSubmitting,m=d.required&&"Обязательное поле";return s[2]!==d.validate||s[3]!==m?(a={required:m,validate:d.validate},s[2]=d.validate,s[3]=m,s[4]=a):a=s[4],s[5]!==d.disabled||s[6]!==d.label||s[7]!==d.labelPlacement||s[8]!==d.placeholder||s[9]!==d.showFloatingHint||s[10]!==d.type||s[11]!==u?(i=function(e){var t,r,n=e.field,a=e.fieldState;return(0,l.jsx)(k.TextField,{type:null!=(r=d.type)?r:"text",showFloatingHint:d.showFloatingHint,label:d.label,placeholder:d.placeholder,labelPlacement:d.labelPlacement,error:null==(t=a.error)?void 0:t.message,disabled:d.disabled||u,value:n.value,onChange:n.onChange,onBlur:n.onBlur,name:n.name})},s[5]=d.disabled,s[6]=d.label,s[7]=d.labelPlacement,s[8]=d.placeholder,s[9]=d.showFloatingHint,s[10]=d.type,s[11]=u,s[12]=i):i=s[12],s[13]!==c||s[14]!==d.name||s[15]!==a||s[16]!==i?(o=(0,l.jsx)(n.Controller,{control:c,name:d.name,rules:a,render:i}),s[13]=c,s[14]=d.name,s[15]=a,s[16]=i,s[17]=o):o=s[17],o};e.i(82131);var M=e.i(61122),V=e.i(57033);let R={src:e.i(27215).default,width:10,height:10,blurWidth:0,blurHeight:0};var Q=function(e,l){var t,r,n=null==(t=e[l])?void 0:t.items;if(null==n?void 0:n.length)return null!=(r=n.find(function(e){return e.default}))?r:n[0]},U=e.i(31398),J=function(e){var l,t=e.excelLink,r=e.filters,a=(0,p.useMemo)(function(){if(r){var e,l,n=r.tasks,a=r.models;if((null==n||null==(e=n.items)?void 0:e.length)&&(null==a||null==(l=a.items)?void 0:l.length))return{tasks:n,models:a,excelLink:t}}},[r,t]),i=(0,b._)((0,p.useState)(!1),2),o=i[0],s=i[1],c=(0,n.useForm)({defaultValues:{filters:{task:{id:"_all",label:"Все",value:"_all"},model:Q(r||{},"models")},excelLink:"",range:{from:3,to:0}}});(0,U.useFiltersSynchronization)({filtersData:a,form:c,resetCallback:function(e){return{filters:{task:{id:"_all",label:"Все",value:"_all"},model:Q(a||{},"models")},excelLink:e.excelLink||"",range:{from:3,to:0}}}});var d=c.watch("filters.task"),u=(null==d?void 0:d.id)==="_all";return(0,p.useEffect)(function(){u&&(c.setValue("range.from",3),c.setValue("range.to",0))},[u,c]),{form:c,formConfig:(0,p.useMemo)(function(){return{excelLink:{name:"excelLink",label:"Ссылка на файл Excel",placeholder:"Введите ссылку на Excel файл",labelPlacement:"top",required:!0,type:"text"},rangeFrom:{name:"range.from",label:"С строки",placeholder:"Номер строки",labelPlacement:"left",required:!0,type:"number",disabled:u,validate:function(e){return void 0===e||!(("string"==typeof e?Number(e):e)<3)||"Минимальное значение — 3"}},rangeTo:{name:"range.to",label:"До строки",placeholder:"Номер строки",labelPlacement:"left",required:!0,type:"number",disabled:u,validate:function(e){if(void 0===e)return!0;var l="string"==typeof e?Number(e):e;return 0===l||!(l<3)||"Допустимые значения: 0 или ≥ 3"}}}},[u]),filtersConfig:{tasks:(null==r?void 0:r.tasks)?(l=r.tasks,(0,O._)((0,h._)({},l),{items:[{id:"_all",label:"Все",value:"_all"}].concat((0,v._)(l.items))})):{items:[],label:""},models:(null==r?void 0:r.models)||{items:[],label:""}},handleClose:function(){return s(!1)},handleOpen:function(){return s(!0)},isOpen:o}};e.i(47167);var X=e.i(91865),Y=e.i(96137),Z=e.i(5766),$=e.i(54616),ee=function(){var e,l=(0,t.c)(1);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationKey:["generate-excel"],mutationFn:B.postExcelGeneration},l[0]=e):e=l[0],(0,$.useMutation)(e)},el=function(e,l){var r,n,a,i=(0,t.c)(9),o=ee().mutateAsync;i[0]!==e||i[1]!==o||i[2]!==l?(r=function(t){return(0,X._)(function(){return(0,Y._)(this,function(r){switch(r.label){case 0:if(!t.filters.task||!t.filters.model)return Z.default.error("Все фильтры должны быть выбраны"),[2];if(!t.excelLink.trim())return Z.default.error("Ссылка на Excel обязательна"),[2];return[4,o({filters:{taskId:t.filters.task.id,modelId:t.filters.model.id},excelLink:t.excelLink,range:{from:t.range.from,to:t.range.to}},{onSuccess:function(t){t.data,Z.default.success("Excel успешно обработан!"),e.reset(),null==l||l()},onError:et})];case 1:return r.sent(),[2]}})})()},i[0]=e,i[1]=o,i[2]=l,i[3]=r):r=i[3];var s=r;return i[4]!==e||i[5]!==s?(n=e.handleSubmit(s),i[4]=e,i[5]=s,i[6]=n):n=i[6],i[7]!==n?(a={handleSubmit:n},i[7]=n,i[8]=a):a=i[8],a};function et(e){console.error("❌ Ошибка генерации из Excel: ",e.message),Z.default.error("Ошибка генерации: ".concat(e.message))}var er=e.i(17878),en=function(){var e,l,r,a=(0,t.c)(9),i=(0,er.useGetGenerationFilters)(),o=i.data,s=i.isLoading,c=i.isError;a[0]===Symbol.for("react.memo_cache_sentinel")?(e={defaultValues:{filters:{task:void 0,model:void 0,domain:void 0},fields:[]}},a[0]=e):e=a[0];var d=(0,n.useForm)(e);a[1]!==o||a[2]!==d?(l={filtersData:o,form:d,resetCallback:ea},a[1]=o,a[2]=d,a[3]=l):l=a[3];var u=(0,U.useFiltersSynchronization)(l).isInitialized,m=s||!u;return a[4]!==o||a[5]!==d||a[6]!==c||a[7]!==m?(r={form:d,filtersData:o,isLoading:m,isError:c},a[4]=o,a[5]=d,a[6]=c,a[7]=m,a[8]=r):r=a[8],r};function ea(e){return{filters:{task:Q(e,"tasks"),model:Q(e,"models"),domain:Q(e,"domains")},fields:[]}}var ei=function(){var e,l=(0,t.c)(1);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationKey:["generate-content"],mutationFn:B.postGeneration},l[0]=e):e=l[0],(0,$.useMutation)(e)},eo=function(e){var l,r,n,a=(0,t.c)(8),i=ei().mutateAsync;a[0]!==e||a[1]!==i?(l=function(l){return(0,X._)(function(){var t,r;return(0,Y._)(this,function(n){switch(n.label){case 0:if(t=l.fields,!(r=l.filters).task||!r.model||!r.domain)return Z.default.error("Все фильтры должны быть выбраны"),[2];return[4,i({filters:{taskId:r.task.id,modelId:r.model.id,domainId:r.domain.id},fields:t.map(es)},{onSuccess:function(l){l.data,Z.default.success("Генерация успешна !");var r=t.map(ec);e.setValue("fields",r)},onError:ed})];case 1:return n.sent(),[2]}})})()},a[0]=e,a[1]=i,a[2]=l):l=a[2];var o=l;return a[3]!==e||a[4]!==o?(r=e.handleSubmit(o),a[3]=e,a[4]=o,a[5]=r):r=a[5],a[6]!==r?(n={handleSubmit:r},a[6]=r,a[7]=n):n=a[7],n};function es(e){var l,t="";return"select"===e.type&&e.multiple&&(t=[]),{name:e.name,value:null!=(l=e.value)?l:t}}function ec(e){var l="";return"photo"===e.type?l=null:"select"===e.type&&e.multiple&&(l=[]),(0,O._)((0,h._)({},e),{value:l})}function ed(e){console.error("❌ Ошибка генерации: ",e.message),Z.default.error("Ошибка генерации: ".concat(e.message))}var eu=e.i(74080),em=(0,w.tv)({slots:{container:"fixed inset-0 flex items-center justify-center",backdrop:"absolute inset-0 bg-black/18 backdrop-blur-sm",modal:"relatiive z-50 border border-neutral-300 shadow-md rounded-xl bg-white"}}),ef=function(e){var r,n=(0,t.c)(4),a=e.children,i=e.open,o=e.onClose;if(n[0]!==a||n[1]!==o||n[2]!==i){var s=em(),c=s.backdrop,d=s.container,u=s.modal;r=i&&(0,eu.createPortal)((0,l.jsxs)("div",{className:d(),children:[(0,l.jsx)("button",{"aria-label":"Close modal",type:"button",onClick:o,className:c()}),(0,l.jsx)("div",{role:"dialog",className:u(),children:a})]}),document.body),n[0]=a,n[1]=o,n[2]=i,n[3]=r}else r=n[3];return r},eh=function(e){var n,s,c,d,u,m,f,h,b,v,x,p,g=(0,t.c)(31),j=e.handleClose,y=e.open,k=e.children,S=e.onSubmit,w=e.isSubmitting;g[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(o.Text,{as:"legend",className:"text-center w-full",weight:"bold",size:"2xl",children:"Обработка Таблицы"}),g[0]=n):n=g[0],g[1]!==k?(s=(0,l.jsxs)("fieldset",{className:"border-none items-center justify-center flex flex-col",children:[n,k]}),g[1]=k,g[2]=s):s=g[2],g[3]!==w?(c=w&&(0,l.jsx)(i.Spinner,{className:"animate-spin text-white w-4 h-4"}),g[3]=w,g[4]=c):c=g[4];var _=w?"Обработка...":"Подтвердить";return g[5]!==_?(d=(0,l.jsx)(o.Text,{size:"sm",uppercase:!0,weight:"medium",color:"white",children:_}),g[5]=_,g[6]=d):d=g[6],g[7]!==c||g[8]!==d?(u=(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[c,d]}),g[7]=c,g[8]=d,g[9]=u):u=g[9],g[10]!==w?(m=!w&&(0,l.jsx)(r.default,{className:"ml-2",alt:"",src:R}),g[10]=w,g[11]=m):m=g[11],g[12]!==w||g[13]!==u||g[14]!==m?(f=(0,l.jsxs)(a.Button,{className:"inline-flex items-center justify-center flex-1",type:"submit",disabled:w,children:[u,m]}),g[12]=w,g[13]=u,g[14]=m,g[15]=f):f=g[15],g[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)(o.Text,{color:"primary",size:"xs",uppercase:!0,children:"отмена"}),g[16]=h):h=g[16],g[17]!==j||g[18]!==w?(b=(0,l.jsx)(a.Button,{onClick:j,variant:"secondary",disabled:w,children:h}),g[17]=j,g[18]=w,g[19]=b):b=g[19],g[20]!==b||g[21]!==f?(v=(0,l.jsxs)("div",{className:"flex mt-6 gap-3.75",children:[f,b]}),g[20]=b,g[21]=f,g[22]=v):v=g[22],g[23]!==S||g[24]!==v||g[25]!==s?(x=(0,l.jsx)("div",{className:"p-8",children:(0,l.jsxs)("form",{onSubmit:S,children:[s,v]})}),g[23]=S,g[24]=v,g[25]=s,g[26]=x):x=g[26],g[27]!==j||g[28]!==y||g[29]!==x?(p=(0,l.jsx)(ef,{open:y,onClose:j,children:x}),g[27]=j,g[28]=y,g[29]=x,g[30]=p):p=g[30],p},eb=function(){var e,i,c,d,u,f,h,b,v,x,p,g,j,y,k,S,w=(0,t.c)(49),_=en(),C=_.filtersData,N=_.form,P=_.isLoading,I=m(),F=I.data,L=I.isLoading;w[0]!==F||w[1]!==C?(e={filters:C,excelLink:F},w[0]=F,w[1]=C,w[2]=e):e=w[2];var T=J(e),E=T.isOpen,q=T.handleOpen,z=T.handleClose,D=T.form,O=T.formConfig,B=T.filtersConfig,H=N.formState.isSubmitting,W=D.formState.isSubmitting,Q=eo(N).handleSubmit,U=el(D,z).handleSubmit;w[3]!==N.control?(i={control:N.control,name:"fields"},w[3]=N.control,w[4]=i):i=w[4];var X=(0,n.useFieldArray)(i),Y=X.fields,Z=X.replace;w[5]!==N.control?(c={control:N.control,name:"filters.task"},w[5]=N.control,w[6]=c):c=w[6];var $=(0,n.useWatch)(c);w[7]!==N.control?(d={control:N.control,name:"filters.model"},w[7]=N.control,w[8]=d):d=w[8];var ee=(0,n.useWatch)(d);w[9]!==N.control?(u={control:N.control,name:"filters.domain"},w[9]=N.control,w[10]=u):u=w[10];var et=(0,n.useWatch)(u),er=null!=(f=null==$?void 0:$.id)?f:"",ea=null!=(h=null==ee?void 0:ee.id)?h:"",ei=null!=(b=null==et?void 0:et.id)?b:"",es=!!((null==$?void 0:$.id)&&(null==ee?void 0:ee.id)&&(null==et?void 0:et.id));w[11]!==Z||w[12]!==er||w[13]!==ea||w[14]!==ei||w[15]!==es?(v={taskId:er,modelId:ea,domainId:ei,replace:Z,enabled:es},w[11]=Z,w[12]=er,w[13]=ea,w[14]=ei,w[15]=es,w[16]=v):v=w[16];var ec=K(v).isLoading;return w[17]!==L||w[18]!==N.control||w[19]!==q||w[20]!==H?(x=function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(M.FilterSelect,{disabled:H,config:e.tasks,control:N.control,name:"filters.task"}),(0,l.jsxs)(a.Button,{disabled:L,className:"inline-flex items-center shrink-0",variant:"primary",onClick:q,children:[(0,l.jsx)(o.Text,{size:"sm",uppercase:!0,weight:"medium",color:"white",children:"Обработка Таблицы"}),(0,l.jsx)(r.default,{className:"ml-2",alt:"",src:R})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(M.FilterSelect,{disabled:H,control:N.control,name:"filters.model",config:e.models}),(0,l.jsx)(M.FilterSelect,{disabled:H,control:N.control,name:"filters.domain",config:e.domains})]})]})},w[17]=L,w[18]=N.control,w[19]=q,w[20]=H,w[21]=x):x=w[21],w[22]!==C||w[23]!==P||w[24]!==x?(p=(0,l.jsx)(V.FiltersPanel,{filters:C,isLoading:P,children:x}),w[22]=C,w[23]=P,w[24]=x,w[25]=p):p=w[25],w[26]!==ec||w[27]!==Y||w[28]!==N.control?(g=(0,l.jsx)(A,{control:N.control,fields:Y,isLoading:ec}),w[26]=ec,w[27]=Y,w[28]=N.control,w[29]=g):g=w[29],w[30]!==H?(j=(0,l.jsx)(s,{isLoading:H}),w[30]=H,w[31]=j):j=w[31],w[32]!==Q||w[33]!==p||w[34]!==g||w[35]!==j?(y=(0,l.jsxs)("form",{onSubmit:Q,className:"flex flex-1 flex-col gap-4",children:[p,g,j]}),w[32]=Q,w[33]=p,w[34]=g,w[35]=j,w[36]=y):y=w[36],w[37]!==D.control||w[38]!==B||w[39]!==C||w[40]!==O||w[41]!==z||w[42]!==U||w[43]!==W||w[44]!==E?(k=C&&(0,l.jsx)(eh,{handleClose:z,open:E,onSubmit:U,isSubmitting:W,children:(0,l.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,l.jsx)(G,{field:O.excelLink,control:D.control}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(M.FilterSelect,{config:B.tasks,control:D.control,name:"filters.task",disabled:W}),(0,l.jsx)(M.FilterSelect,{config:B.models,control:D.control,name:"filters.model",disabled:W})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(G,{field:O.rangeFrom,control:D.control}),(0,l.jsx)(G,{field:O.rangeTo,control:D.control})]})]})}),w[37]=D.control,w[38]=B,w[39]=C,w[40]=O,w[41]=z,w[42]=U,w[43]=W,w[44]=E,w[45]=k):k=w[45],w[46]!==y||w[47]!==k?(S=(0,l.jsxs)("section",{className:"flex flex-1",children:[y,k]}),w[46]=y,w[47]=k,w[48]=S):S=w[48],S};e.s(["GenerationFormWidget",()=>eb],94102)},70330,e=>{"use strict";e.s(["GenerationResultWidget",()=>j,"VIEW_MODES",()=>x],70330);var l=e.i(51682),t=e.i(43476),r=e.i(932),n=e.i(71645);e.i(20786),e.i(92808);var a=e.i(40143),i=e.i(19273),o=e.i(12598);function s(e,l){return e.findAll(l.filters).map(function(e){return l.select?l.select(e):e.state})}var c=function(){var e,l,t=(0,r.c)(3);t[0]===Symbol.for("react.memo_cache_sentinel")?(e={filters:{status:"success",predicate:d},select:u},t[0]=e):e=t[0];var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,t=(0,o.useQueryClient)(l).getMutationCache(),r=n.useRef(e),c=n.useRef(null);return null===c.current&&(c.current=s(t,e)),n.useEffect(function(){r.current=e}),n.useSyncExternalStore(n.useCallback(function(e){return t.subscribe(function(){var l=(0,i.replaceEqualDeep)(c.current,s(t,r.current));c.current!==l&&(c.current=l,a.notifyManager.schedule(e))})},[t]),function(){return c.current},function(){return c.current})}(e);return t[1]!==c?(l=c.at(-1),t[1]=c,t[2]=l):l=t[2],l};function d(e){var l,t=null==(l=e.options.mutationKey)?void 0:l[0];return"generate-content"===t||"generate-excel"===t}function u(e){return e.state.data}var m=e.i(97274);e.i(92916);var f=e.i(77086),h=(0,e.i(42010).tv)({slots:{track:"w-8 h-3 rounded-full flex items-center transition",thumb:"block w-4.5 h-4.5 rounded-full transform transition"},variants:{checked:{true:{thumb:"translate-x-4 bg-primary",track:"bg-primary"},false:{thumb:"bg-primary/90",track:"bg-primary/85"}}}}),b=function(e){var l,n,a,i,o,s,c=(0,r.c)(13),d=e.onSwitch,u=e.checked;if(c[0]!==u||c[1]!==d){var m=h({checked:u}),f=m.thumb,b=m.track;n="button",a=d,i=b(),l=f(),c[0]=u,c[1]=d,c[2]=l,c[3]=n,c[4]=a,c[5]=i}else l=c[2],n=c[3],a=c[4],i=c[5];return c[6]!==l?(o=(0,t.jsx)("span",{className:l}),c[6]=l,c[7]=o):o=c[7],c[8]!==n||c[9]!==a||c[10]!==i||c[11]!==o?(s=(0,t.jsx)("button",{type:n,onClick:a,className:i,children:o}),c[8]=n,c[9]=a,c[10]=i,c[11]=o,c[12]=s):s=c[12],s},v=function(e){var n,a,i,o,s,c=(0,r.c)(14),d=e.mode,u=e.onToggle,m=e.labels,h=(0,l._)(x,2),v=h[0],p=h[1],g=d!==v,j=d===v?"primary":"black",y=d===p?"primary":"black";c[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(f.Text,{size:"2xl",children:"Результат"}),c[0]=n):n=c[0];var k=m[x[0]];c[1]!==j||c[2]!==k?(a=(0,t.jsx)(f.Text,{color:j,children:k}),c[1]=j,c[2]=k,c[3]=a):a=c[3],c[4]!==g||c[5]!==u?(i=(0,t.jsx)(b,{checked:g,onSwitch:u}),c[4]=g,c[5]=u,c[6]=i):i=c[6];var S=m[x[1]];return c[7]!==y||c[8]!==S?(o=(0,t.jsx)(f.Text,{color:y,children:S}),c[7]=y,c[8]=S,c[9]=o):o=c[9],c[10]!==a||c[11]!==i||c[12]!==o?(s=(0,t.jsxs)("header",{className:"flex justify-between",children:[n,(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[a,i,o]})]}),c[10]=a,c[11]=i,c[12]=o,c[13]=s):s=c[13],s},x=["demo","source"],p={demo:"Отображение",source:"Исходный код"},g={demo:"text",source:"html"},j=function(){var e,a,i,o,s,d=(0,r.c)(9),u=(0,l._)((0,n.useState)("demo"),2),h=u[0],b=u[1],x=c();d[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(){b(y)},d[0]=a):a=d[0];var j=a,k=null==x||null==(e=x.data)?void 0:e[g[h]];return d[1]!==h?(i=(0,t.jsx)(v,{labels:p,mode:h,onToggle:j}),d[1]=h,d[2]=i):i=d[2],d[3]!==k||d[4]!==(null==x?void 0:x.data)?(o=(0,t.jsx)(m.Paper,{className:"flex-1",children:(null==x?void 0:x.data)?(0,t.jsx)(f.Text,{children:k}):(0,t.jsx)(f.Text,{color:"info",children:"Настройте параметры и запустите генерацию"})}),d[3]=k,d[4]=null==x?void 0:x.data,d[5]=o):o=d[5],d[6]!==i||d[7]!==o?(s=(0,t.jsxs)("section",{className:"flex flex-col flex-1 gap-3",children:[i,o]}),d[6]=i,d[7]=o,d[8]=s):s=d[8],s};function y(e){var t=(0,l._)(x,2),r=t[0],n=t[1];return e===r?n:r}}]);